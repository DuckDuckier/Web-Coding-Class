<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>UF1306 - Cap铆tulo 1: Validaci贸n de datos</title>
  <link rel="stylesheet" href="funciones-validacion.css">
</head>
<body>
  <header>
    <h1>UF1306 - Cap铆tulo 1: Validaci贸n de datos en p谩ginas web</h1>
    <p>Pruebas de funcionalidades y optimizaci贸n de p谩ginas web</p>
  </header>

  <main>
    <!-- 1. Introducci贸n -->
    <section>
      <h2>1. Introducci贸n</h2>
      <p>La validaci贸n de datos permite asegurar que los valores introducidos por el usuario cumplen con los requisitos esperados. Se puede realizar en el cliente (HTML5 o JavaScript) o en el servidor (PHP, Node...), y es clave para evitar errores, mejorar la experiencia y proteger la integridad de los datos.</p>
    </section>

    <!-- 2. Funciones de Validaci贸n -->
    <section>
      <h2>2. Funciones de Validaci贸n</h2>
      <ul>
        <li>Campos obligatorios (<code>required</code>)</li>
        <li>Formato espec铆fico (<code>type</code>, <code>pattern</code>)</li>
        <li>Validaci贸n personalizada con JavaScript</li>
        <li>Mensajes de error personalizados (<code>title</code>)</li>
      </ul>
    </section>
<!-- 2. Funciones de Validaci贸n -->
<section>
  <h2>2. Funciones de Validaci贸n</h2>

  <!-- 2.1 Descripci贸n -->
  <article>
    <h3>2.1 Descripci贸n de las funciones</h3>
    <p>Las funciones de validaci贸n son bloques de c贸digo que permiten comprobar si los datos introducidos por el usuario cumplen con unas reglas definidas. Pueden estar escritas en <strong>JavaScript</strong> (cliente) o en <strong>PHP</strong> (servidor).</p>
  </article>

  <!-- 2.2 Utilidad -->
  <article>
    <h3>2.2 Utilidad de las funciones</h3>
    <ul>
      <li>Evitar errores en la introducci贸n de datos.</li>
      <li>Mejorar la experiencia del usuario con mensajes claros.</li>
      <li>Proteger la seguridad de la aplicaci贸n.</li>
      <li>Garantizar la coherencia de la informaci贸n almacenada.</li>
    </ul>
  </article>

  <!-- 2.3 Implementaci贸n -->
  <article>
    <h3>2.3 Implementaci贸n de las funciones</h3>
    <p>La implementaci贸n puede hacerse en el cliente (JavaScript) o en el servidor (PHP). Lo ideal es combinar ambas.</p>
  </article>

  <!-- 2.4 Validaciones espec铆ficas -->
  <article>
    <h3>2.4 Validaciones alfab茅ticas, num茅ricas y de fechas</h3>
    <ul>
      <li><strong>Alfab茅ticas:</strong> Solo letras (ejemplo: nombre).</li>
      <li><strong>Num茅ricas:</strong> Solo n煤meros (ejemplo: edad).</li>
      <li><strong>Fechas:</strong> Formato correcto de fecha (ejemplo: dd/mm/aaaa).</li>
    </ul>
  </article>

  <!-- 2.5 Definici贸n -->
  <article>
    <h3>2.5 Definici贸n de validaciones</h3>
    <p>Una validaci贸n es la comprobaci贸n de que un dato cumple con un formato, rango o condici贸n espec铆fica antes de ser aceptado.</p>
  </article>

  <!-- 2.6 C贸digo -->
  <article>
    <h3>2.6 C贸digo de validaci贸n</h3>
    <p>Ejemplo en <strong>JavaScript</strong> (validar que un campo solo contenga letras):</p>
    <pre><code>&lt;script&gt;
function validarNombre() {
  const nombre = document.getElementById("nombre").value;
  const patron = /^[A-Za-z谩茅铆贸煤帽\s]+$/;
  if (!patron.test(nombre)) {
    alert("El nombre solo puede contener letras.");
    return false;
  }
  return true;
}
&lt;/script&gt;
</code></pre>

    <p>Ejemplo en <strong>PHP</strong> (validar que la edad sea num茅rica y mayor de 18):</p>
    <pre class="php-code"><code>&lt;?php
$edad = $_POST["edad"] ?? "";
if (!is_numeric($edad) || $edad &lt; 18) {
  echo " La edad debe ser un n煤mero mayor o igual a 18.";
} else {
  echo " Edad v谩lida.";
}
?&gt;
</code></pre>
  </article>

  <!-- 2.7 Ejecuci贸n -->
  <article>
    <h3>2.7 Ejecuci贸n de c贸digo de validaci贸n</h3>
    <p>La ejecuci贸n depende del entorno:</p>
    <ul>
      <li><strong>JavaScript:</strong> se ejecuta en el navegador al enviar el formulario o al cambiar un campo.</li>
      <li><strong>PHP:</strong> se ejecuta en el servidor cuando el formulario se env铆a y procesa.</li>
    </ul>
    <p>Ejemplo de formulario que ejecuta validaci贸n en cliente y servidor:</p>
    <pre><code>&lt;form action="procesar.php" method="post" onsubmit="return validarNombre()"&gt;
  &lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
  &lt;input type="text" id="nombre" name="nombre" required&gt;
  &lt;button type="submit"&gt;Enviar&lt;/button&gt;
&lt;/form&gt;
</code></pre>
  </article>
</section>
<!-- 3. Verificar Formularios -->
<section>
  <h2>3. Verificar Formularios</h2>
  <p>La verificaci贸n de formularios consiste en comprobar que los datos introducidos cumplen con los requisitos antes de ser procesados. Se puede realizar en el cliente (JavaScript) y en el servidor (PHP). Lo ideal es combinar ambas para mejorar la experiencia del usuario y garantizar la seguridad.</p>

  <!-- 3.1 Identificaci贸n de datos -->
  <article>
    <h3>3.1 Identificaci贸n de datos</h3>
    <p>Para poder verificar un formulario, primero debemos identificar correctamente cada campo:</p>
    <ul>
      <li><strong>name:</strong> es la clave que viaja al servidor.</li>
      <li><strong>id:</strong> permite seleccionar el campo desde JavaScript y asociarlo con su etiqueta.</li>
      <li><strong>type:</strong> define el tipo de dato esperado (email, number, date...).</li>
      <li><strong>Restricciones HTML5:</strong> atributos como <code>required</code>, <code>pattern</code>, <code>min</code>, <code>max</code>.</li>
    </ul>

    <pre><code>&lt;form id="formVerificacion" action="procesar_form.php" method="post" onsubmit="return verificarCliente()"&gt;
  &lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
  &lt;input type="text" id="nombre" name="nombre" required maxlength="60"&gt;
  &lt;span id="errorNombre" class="error"&gt;&lt;/span&gt;

  &lt;label for="email"&gt;Correo electr贸nico:&lt;/label&gt;
  &lt;input type="email" id="email" name="email" required&gt;
  &lt;span id="errorEmail" class="error"&gt;&lt;/span&gt;

  &lt;label for="edad"&gt;Edad:&lt;/label&gt;
  &lt;input type="number" id="edad" name="edad" min="18" max="99" required&gt;
  &lt;span id="errorEdad" class="error"&gt;&lt;/span&gt;

  &lt;label for="fechaNac"&gt;Fecha de nacimiento:&lt;/label&gt;
  &lt;input type="date" id="fechaNac" name="fechaNac" required&gt;
  &lt;span id="errorFecha" class="error"&gt;&lt;/span&gt;

  &lt;button type="submit"&gt;Enviar&lt;/button&gt;
&lt;/form&gt;
</code></pre>
  </article>

  <!-- 3.2 Implementaci贸n del c贸digo de verificaci贸n -->
  <article>
    <h3>3.2 Implementaci贸n del c贸digo de verificaci贸n</h3>
    <p>La verificaci贸n puede hacerse en el cliente con <strong>JavaScript</strong> y en el servidor con <strong>PHP</strong>. A continuaci贸n se muestran ejemplos de ambos enfoques.</p>

    <h4> Validaci贸n en el lado del cliente (JavaScript)</h4>
    <p>El navegador revisa los datos antes de enviarlos. Si hay errores, muestra mensajes inmediatos y bloquea el env铆o.</p>

    <pre><code>&lt;script&gt;
function verificarCliente() {
  const nombre = document.getElementById("nombre").value.trim();
  const email = document.getElementById("email").value.trim();
  const edad = document.getElementById("edad").value;
  const fecha = document.getElementById("fechaNac").value;

  // Limpia mensajes previos
  document.getElementById("errorNombre").textContent = "";
  document.getElementById("errorEmail").textContent = "";
  document.getElementById("errorEdad").textContent = "";
  document.getElementById("errorFecha").textContent = "";

  let valido = true;

  // Nombre: m铆nimo 3 letras
  const patronNombre = /^[A-Za-z谩茅铆贸煤帽\s]{3,}$/;
  if (!patronNombre.test(nombre)) {
    document.getElementById("errorNombre").textContent = "Introduce al menos 3 letras. Solo letras y espacios.";
    valido = false;
  }

  // Email
  const patronEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!patronEmail.test(email)) {
    document.getElementById("errorEmail").textContent = "Correo no v谩lido. Ejemplo: usuario@dominio.com";
    valido = false;
  }

  // Edad
  const nEdad = Number(edad);
  if (Number.isNaN(nEdad) || nEdad &lt; 18 || nEdad &gt; 99) {
    document.getElementById("errorEdad").textContent = "Edad entre 18 y 99.";
    valido = false;
  }

  // Fecha
  if (!fecha) {
    document.getElementById("errorFecha").textContent = "Selecciona una fecha.";
    valido = false;
  } else {
    const hoy = new Date();
    const f = new Date(fecha);
    if (f &gt;= hoy) {
      document.getElementById("errorFecha").textContent = "La fecha debe ser anterior a hoy.";
      valido = false;
    }
  }

  return valido;
}
&lt;/script&gt;
</code></pre>

    <h4> Validaci贸n en el lado del servidor (PHP)</h4>
    <p>El servidor valida los datos despu茅s de recibirlos. Aunque el usuario manipule el formulario o desactive JavaScript, PHP siempre revisa.</p>

    <pre class="php-code"><code>&lt;?php
// procesar_form.php

function limpiar($dato) {
  return htmlspecialchars(trim($dato), ENT_QUOTES, 'UTF-8');
}

$nombre   = limpiar($_POST['nombre'] ?? '');
$email    = limpiar($_POST['email'] ?? '');
$edad     = limpiar($_POST['edad'] ?? '');
$fechaNac = limpiar($_POST['fechaNac'] ?? '');

$errores = [];

// Validaciones
if (!preg_match('/^[A-Za-z谩茅铆贸煤帽\s]{3,}$/', $nombre)) {
  $errores[] = "Nombre inv谩lido: m铆nimo 3 letras, solo letras y espacios.";
}

if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
  $errores[] = "Correo inv谩lido.";
}

if (!is_numeric($edad) || $edad &lt; 18 || $edad &gt; 99) {
  $errores[] = "Edad fuera de rango (18-99).";
}

if (!$fechaNac || strtotime($fechaNac) &gt;= strtotime('today')) {
  $errores[] = "La fecha de nacimiento debe ser anterior a hoy.";
}

// Respuesta
if ($errores) {
  echo "&lt;h3&gt; Errores encontrados:&lt;/h3&gt;&lt;ul&gt;";
  foreach ($errores as $e) {
    echo "&lt;li&gt;$e&lt;/li&gt;";
  }
  echo "&lt;/ul&gt;";
} else {
  echo "&lt;h3&gt;Datos v谩lidos&lt;/h3&gt;";
  echo "&lt;p&gt;Nombre: $nombre&lt;/p&gt;";
  echo "&lt;p&gt;Email: $email&lt;/p&gt;";
  echo "&lt;p&gt;Edad: $edad&lt;/p&gt;";
  echo "&lt;p&gt;Fecha de nacimiento: $fechaNac&lt;/p&gt;";
}
?&gt;
</code></pre>
  </article>
</section>
<!-- 3.3 Diagrama de flujo -->
<section>
  <h2>3.3 Diagrama de flujo: Viaje de los datos</h2>
  <p>El siguiente diagrama muestra c贸mo viajan los datos desde que el usuario los introduce en el formulario hasta que recibe la respuesta del servidor:</p>

  <div class="flujo">
    <div class="paso animado"> Formulario<br>(Usuario introduce datos)</div>
    <div class="flecha animada">★</div>
    <div class="paso animado"> Cliente<br>(Validaci贸n con JavaScript)</div>
    <div class="flecha animada">★</div>
    <div class="paso animado"> Servidor<br>(Validaci贸n con PHP)</div>
    <div class="flecha animada">★</div>
    <div class="paso animado"> Respuesta<br>(Errores o confirmaci贸n)</div>
  </div>
</section>

    <!-- 3. Verificar Formularios -->
    <section>
      <h2>3. Verificar Formularios</h2>

      <h3> Validaci贸n con HTML5</h3>
      <form>
        <label for="usuario">Usuario (solo letras, m铆nimo 3):</label>
        <input type="text" id="usuario" name="usuario"
               pattern="[A-Za-z]{3,}"
               title="Introduce al menos 3 letras sin n煤meros"
               required>

        <label for="email">Correo electr贸nico:</label>
        <input type="email" id="email" name="email" required>

        <button type="submit">Enviar</button>
      </form>

      <h3> Validaci贸n con JavaScript</h3>
      <form onsubmit="return validarFormularioJS()">
        <label for="dni">DNI (8 n煤meros y una letra):</label>
        <input type="text" id="dni" name="dni">
        <span id="errorDNI" class="error"></span>

        <button type="submit">Validar</button>
      </form>

      <script>
        function validarFormularioJS() {
          const dni = document.getElementById("dni").value;
          const patron = /^[0-9]{8}[A-Za-z]$/;
          const error = document.getElementById("errorDNI");

          if (!patron.test(dni)) {
            error.textContent = "Formato incorrecto. Ejemplo: 12345678A";
            return false;
          }

          error.textContent = "";
          return true;
        }
      </script>
    </section>

    <!-- 4. Comparativa HTML5 vs JavaScript vs PHP -->
    <section>
      <h2>4. Comparativa: HTML5 vs JavaScript vs PHP</h2>
      <table>
        <thead>
          <tr>
            <th>Aspecto</th>
            <th>HTML5</th>
            <th>JavaScript</th>
            <th>PHP (Servidor)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td> Complejidad</td>
            <td>Baja (solo atributos)</td>
            <td>Media/Alta (requiere programaci贸n)</td>
            <td>Media (requiere l贸gica backend)</td>
          </tr>
          <tr>
            <td> Rendimiento</td>
            <td>Muy r谩pido (nativo del navegador)</td>
            <td>R谩pido, depende del c贸digo</td>
            <td>M谩s lento (requiere env铆o y procesamiento)</td>
          </tr>
          <tr>
            <td> Flexibilidad</td>
            <td>Limitada a reglas simples</td>
            <td>Totalmente personalizable</td>
            <td>Total (acceso a BD, reglas de negocio)</td>
          </tr>
          <tr>
            <td> Interactividad</td>
            <td>B谩sica</td>
            <td>Alta (mensajes din谩micos, estilos, etc.)</td>
            <td>Nula (no interact煤a directamente con el usuario)</td>
          </tr>
          <tr>
            <td> Seguridad</td>
            <td>No confiable por s铆 sola</td>
            <td>Tampoco suficiente sin servidor</td>
            <td>Alta (control total, evita manipulaci贸n)</td>
          </tr>
          <tr>
            <td> Ideal para...</td>
            <td>Formularios simples</td>
            <td>Validaciones complejas o condicionales</td>
            <td>Validaci贸n definitiva y protecci贸n de datos</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- 5. Validaci贸n en el Servidor -->
    <section>
      <h2>5. Validaci贸n en el Servidor (PHP)</h2>
      <p>La validaci贸n en el servidor se realiza una vez que el formulario ha sido enviado. Es esencial para garantizar la seguridad, ya que los datos pueden ser manipulados en el cliente. Aunque HTML5 y JavaScript mejoran la experiencia del usuario, <strong>la validaci贸n en el servidor nunca debe omitirse</strong>.</p>

      <h3> Ejemplo de validaci贸n con PHP</h3>
      <p>Formulario HTML:</p>
      <pre><code>&lt;form action="procesar.php" method="post"&gt;
  &lt;label for="email"&gt;Correo electr贸nico:&lt;/label&gt;
  &lt;input type="email" id="email" name="email" required&gt;

  &lt;label for="edad"&gt;Edad:&lt;/label&gt;
  &lt;input type="number" id="edad" name="edad" min="18" max="99" required&gt;

  &lt;button type="submit"&gt;Enviar&lt;/button&gt;
&lt;/form&gt;
</code></pre>

      <p>Script PHP (<code>procesar.php</code>):</p>
      <pre class="php-code"><code>&lt;?php
function limpiar($dato) {
  return htmlspecialchars(trim($dato));
}

$email = limpiar($_POST["email"]);
$edad = limpiar($_POST["edad"]);
$errores = [];

if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
  $errores[] = "El correo no tiene un formato v谩lido.";
}

if (!is_numeric($edad) || $edad &lt; 18 || $edad &gt; 99) {
  $errores[] = "La edad debe estar entre 18 y 99 a帽os.";
}

if (count($errores) &gt; 0) {
  echo "&lt;h3&gt;Errores encontrados:&lt;/h3&gt;&lt;ul&gt;";
  foreach ($errores as $error) {
    echo "&lt;li&gt;$error&lt;/li&gt;";
  }
  echo "&lt;/ul&gt;";
} else {
  echo "&lt;p&gt;Datos v谩lidos. Procesando...&lt;/p&gt;";
  // Aqu铆 podr铆as guardar en base de datos, enviar email, etc.
}
?&gt;
</code></pre>
    </section>

    <!-- 6. Resumen y Ejercicios -->
    <section>
      <h2>6. Resumen y Ejercicios</h2>
      <p>La validaci贸n es una herramienta clave para mejorar la calidad y seguridad de las p谩ginas web. Practica con los siguientes ejercicios:</p>
      <ol>
        <li>Crear un formulario con validaci贸n HTML5 para nombre, email y tel茅fono.</li>
        <li>Implementar validaci贸n de contrase帽a con JavaScript (m铆nimo 8 caracteres, una may煤scula y un n煤mero).</li>
        <li>Comparar los resultados entre validaci贸n en cliente y servidor.</li>
      </ol>
    </section>
  </main>

  <footer>
    <p>Material did谩ctico para UF1306 - Docente: Joaqu铆n Mart铆n</p>
  </footer>
</body>
</html>
